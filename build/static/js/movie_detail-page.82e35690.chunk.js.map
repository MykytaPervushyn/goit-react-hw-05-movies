{"version":3,"sources":["services/movies-api.js","views/MovieDetailView/MovieDetailView.module.css","views/MovieDetailView/MovieDetailView.js"],"names":["BASE_URL","API_KEY","fetchMovies","fetch","then","response","ok","json","Promise","reject","Error","fetchMovieById","movieId","fetchCast","fetchReview","fetchQuery","query","module","exports","MovieCast","lazy","Reviews","MovieDetailsView","location","useLocation","slug","useParams","match","useState","movie","setMovie","useEffect","moviesAPI","to","state","from","pathname","search","style","marginRight","marginBottom","className","s","container","src","poster_path","alt","original_title","description","vote_average","overview","genres","map","name","join","additionalInfo","label","fallback","loader","type","color","height","width","timeout","path","element"],"mappings":"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","file":"static/js/movie_detail-page.82e35690.chunk.js","sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3';\r\nconst API_KEY = '52d240069c1d754f89fa7da7b1692ef8';\r\n\r\n\r\nexport function fetchMovies() {\r\n  return fetch(`${BASE_URL}/trending/movie/day?api_key=${API_KEY}`).then(\r\n    (response) => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n      return Promise.reject(new Error('Not found'));\r\n    }\r\n  );\r\n}\r\n\r\nexport function fetchMovieById(movieId) {\r\n  return fetch(\r\n    `${BASE_URL}/movie/${movieId}?api_key=${API_KEY}&language=en-US`\r\n  ).then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return Promise.reject(new Error('Not found'));\r\n  });\r\n}\r\n\r\nexport function fetchCast(movieId) {\r\n  return fetch(\r\n    `${BASE_URL}/movie/${movieId}/credits?api_key=${API_KEY}&language=en-US`\r\n  ).then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return Promise.reject(new Error('There are no data for this movie'));\r\n  });\r\n}\r\n\r\nexport function fetchReview(movieId) {\r\n  return fetch(\r\n    `${BASE_URL}/movie/${movieId}/reviews?api_key=${API_KEY}&language=en-US`\r\n  ).then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return Promise.reject(new Error('There are no reviews for this movie'));\r\n  });\r\n}\r\n\r\nexport function fetchQuery(query) {\r\n  return fetch(\r\n    `${BASE_URL}/search/movie?api_key=${API_KEY}&language=en-US&query=${query}&include_adult=false`\r\n  ).then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return Promise.reject(new Error(`No movies with ${query} name`));\r\n  });\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MovieDetailView_container__1g47C\",\"description\":\"MovieDetailView_description__IQ4lz\"};","import { useState, useEffect, Suspense, lazy } from 'react';\r\nimport { useParams, Link, Route, Routes, useLocation, } from 'react-router-dom';\r\nimport * as moviesAPI from '../../services/movies-api';\r\nimport Loader from \"react-loader-spinner\";\r\nimport s from './MovieDetailView.module.css';\r\nimport { ImArrowLeft } from 'react-icons/im';\r\n\r\nconst MovieCast = lazy(() => import('../../components/MovieCast/MovieCast' /* webpackChunkName: \"cast-page\" */))\r\nconst Reviews = lazy(() => import('../../components/Reviews/Reviews' /* webpackChunkName: \"reviews-page\" */))\r\n\r\nexport default function MovieDetailsView() {\r\n  const location = useLocation();\r\n  const { slug } = useParams();\r\n  const movieId = slug.match(/[a-zA-Z0-9]+$/)[0];\r\n  const [movie, setMovie] = useState(null);\r\n\r\n  useEffect(() => {\r\n    moviesAPI.fetchMovieById(movieId).then(setMovie);\r\n  }, [movieId]);\r\n\r\n  // const onGoBack = () => {\r\n  //   navigate(\r\n  //   location.state?.from?.pathname\r\n  //     ? `${location.state?.from?.pathname}${location.state?.from?.search}`\r\n  //     : '/',\r\n  // );\r\n  // }\r\n\r\n  return (\r\n    <>\r\n      {movie && (\r\n        <>\r\n          {/* <button type=\"button\" onClick={onGoBack}>Go back</button> */}\r\n          <Link to={location.state?.from?.pathname\r\n         ? `${location.state?.from?.pathname}${location.state?.from?.search}`\r\n            : '/'}>\r\n            <ImArrowLeft style={{ marginRight: 8, marginBottom: -2 }} />\r\n            Go back</Link>\r\n          <div className={s.container}>\r\n            <img src={`https://image.tmdb.org/t/p/w342/${movie.poster_path}`} alt={movie.original_title} />\r\n            <div className={s.description}>\r\n              <h2>{movie.original_title}</h2>\r\n              <p>User Score: {movie.vote_average * 10}%</p>\r\n              <h3>Overview</h3>\r\n              <p>{movie.overview}</p>\r\n              <h4>Genres</h4>\r\n              <p>{movie.genres.map(({ name }) => name).join(', ')}</p>\r\n            </div>\r\n          </div>\r\n          <div className={s.additionalInfo}>\r\n            <hr/>\r\n            <h5>Additional information</h5>\r\n            <ul>\r\n              <li>\r\n                <Link\r\n                  to={`/movies/${slug}/cast`}\r\n                  state={{ from: location.state.from, label: 'Go back' }}\r\n                >\r\n            Cast\r\n          </Link>\r\n\r\n              </li>\r\n              <li>\r\n                <Link\r\n                  to={`/movies/${slug}/reviews`}\r\n                  state={{ from: location.state.from, label: 'Go back' }}\r\n                >\r\n            Reviews\r\n            </Link>\r\n              </li>\r\n            </ul>\r\n          \r\n            <hr/>\r\n            </div>\r\n          <Suspense fallback={\r\n            <Loader\r\n              className={s.loader}\r\n              type=\"TailSpin\"\r\n              color=\"#00BFFF\"\r\n              height={100}\r\n              width={100}\r\n              timeout={3000} //3 secs\r\n            />}>\r\n          <Routes>\r\n            <Route path=\"/cast\" element={<MovieCast />} />\r\n            <Route path=\"/reviews\" element={<Reviews />} />\r\n            </Routes>\r\n          </Suspense>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}"],"sourceRoot":""}